<div class="ui-select-container dropdown" [class.open]="optionsOpened" [class.disabled]="disabled">
  <div [class.ui-disabled]="disabled"></div>

  <div *ngIf="multiple; else single" class="ui-select-match multiple" tabindex="0" (keyup)="mainClick($event)" (click)="matchClick($event)">
    <span tabindex="-1" class="ui-select-toggle"
      [ngClass]="{'align-left': alignment === 'left', 'align-center': alignment === 'center', 'align-right': alignment === 'right'}"
      >
      <span *ngIf="!active && placeholderShow" class="ui-select-placeholder text-muted">{{placeholder}}</span>
      <div *ngFor="let it of active" class="ui-select-match-text {{it.cssClass}}">
        <ng-container [ngTemplateOutlet]="templateOptionSelected || defaultTemplateSelection"
          [ngTemplateOutletContext]="{$implicit: it, index: 0, item: it}">
        </ng-container>
        <i *ngIf="allowClear && active && !disabled" (click)="unselectClick($event, it)" class="glyphicon glyphicon-remove btn-remove"></i>
      </div>
    </span>


    <i class="glyphicon dropdown-caret"
      [ngClass]="{'glyphicon-menu-down': !optionsOpened, 'glyphicon-menu-up': optionsOpened}"></i>
  </div>

  <ng-template #single>
    <div class="ui-select-match" tabindex="0" (keyup)="mainClick($event)" (click)="matchClick($event)">
      <span tabindex="-1" class="ui-select-toggle"
        [ngClass]="{'align-left': alignment === 'left', 'align-center': alignment === 'center', 'align-right': alignment === 'right'}"
        >
        <span *ngIf="!active && placeholderShow" class="ui-select-placeholder text-muted">{{placeholder}}</span>
        <span *ngIf="active" class="ui-select-match-text {{active.cssClass}}">
          <ng-container [ngTemplateOutlet]="templateOptionSelected || defaultTemplateSelection"
            [ngTemplateOutletContext]="{$implicit: active, index: 0, item: active}">
          </ng-container>
        </span>
      </span>

      <i *ngIf="allowClear && active && !disabled" (click)="removeClick($event)" class="glyphicon glyphicon-remove btn-remove"></i>
      <i class="glyphicon dropdown-caret"
        [ngClass]="{'glyphicon-menu-down': !optionsOpened, 'glyphicon-menu-up': optionsOpened}"></i>
    </div>
  </ng-template>


</div>

<ng-template #defaultTemplateSelection let-item="item">
  <span [title]="sanitize(item.Value)" [innerHtml]="sanitize(item.Value)"></span>
</ng-template>


